# Copyright © {{COPYRIGHT_YEARS}} {{AUTHOR}}. All rights reserved.

#!————————————————————————————————————————————————————————————————————————————*!
# Entry point for https://app.wercker.com/. Instructs wercker to check that
# every branch passes linting and testing on every commit. For more
# documentation, see https://devcenter.wercker.com/.
#
# IMPORTANT: This file was auto-generated by `grunt generate-wercker`. It is
#            recommended to not modify this file. For more information, see
#            https://github.com/brandonLi8/grunt-config/.
#
# @author {{AUTHOR}} <{{AUTHOR_EMAIL}}>
#!————————————————————————————————————————————————————————————————————————————*!

box: node                           # Use the default Node.js container.

build:                              # Build definition
  steps:                            # The steps that will be executed on build

    - script:                       # Script to Install Node.js first
      name: Install Node.js
      code: |
        npm prune -production=true  # prune - ensure a fresh copy of node_modules
        npm cache clean --f         # clear the cache to ensure validity of node_modules
        npm install                 # install dependencies

        echo "node version $(node -v) running"
        echo "npm version $(npm -v) running"

    - script:                       # Run Continuous Testing commands
      name: Continuous Testing
      code: |
        grunt eslint --no-cache     # ensure everything is linted
        npm test                    # run tests

    - script:
      name: Goodbye
      code: |
        echo "Bye!"