# Copyright © {{COPYRIGHT_YEARS}} {{AUTHOR}}. All rights reserved.

#!————————————————————————————————————————————————————————————————————————————*!
# GitHub action that instructs GitHub to run `grunt update-copyright` to update
# every file's copyright date every year. See `grunt-config/src/Copyright` for
# information on correct copyright statements. See
# https://help.github.com/en/actions for more documentation on GitHub actions.
#
# IMPORTANT: This file was auto-generated by `grunt generate-update-copyright`.
#            It is recommended to not modify this file. For more information,
#            see https://github.com/brandonLi8/grunt-config/.
#
# @author {{AUTHOR}} <{{AUTHOR_EMAIL}}>
#!————————————————————————————————————————————————————————————————————————————*!
name: build                         # tentative workflow name
on:
  schedule:
    - cron:  '0 1 1 1 *'            # activate on every new year's day.

jobs:
  build:
    name: build                     # tentative workflow name
    runs-on: ubuntu-latest

    steps:                          # checkout and set up node
    - uses: actions/checkout@v1     # ensure a fresh checkout of source code

    - name: Setup Node              # setup Node.js
      uses: actions/setup-node@v1

    - name: npm stability           # ensure the stability of npm
      run: |
        npm prune -production=true  # prune for a fresh node_modules directory
        npm cache clean --f         # clear the cache
        npm install                 # install dependencies

    - name: Update Copyrights       # ensure copyright statements are updated.
      run: grunt update-copyright

    - name: Commit Local Changes
      run: |
        git config --local user.email "action@github.com"
        git config --local user.name "GitHub Action"
        git commit -m "Add changes" -a

    # Push Local Changes. See https://github.com/ad-m/github-push-action.
    - name: Push Local Changes
      uses: ad-m/github-push-action@master
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}