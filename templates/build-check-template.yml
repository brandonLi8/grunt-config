# Copyright © {{COPYRIGHT_YEARS}} {{AUTHOR}}. All rights reserved.

#!————————————————————————————————————————————————————————————————————————————*!
# GitHub action that instructs GitHub to check that every branch passes linting
# and testing, triggered on every commit. See https://help.github.com/en/actions
# for more documentation.
#
# IMPORTANT: This file was auto-generated by `grunt generate-build-check`. It
#            is recommended to not modify this file. For more information, see
#            https://github.com/brandonLi8/grunt-config/.
#
# Your badge url should look like:
# [![Actions Status]({{GITHUB_URL}}/workflows/build/badge.svg)]({{GITHUB_URL}}/actions?query=workflow%3Abuild)
#
# @author {{AUTHOR}} <{{AUTHOR_EMAIL}}>
#!————————————————————————————————————————————————————————————————————————————*!
name: build                         # tentative workflow name
on: [ push, pull_request ]          # activate on pushes and pull requests

jobs:
  build:
    name: build                     # tentative workflow name
    runs-on: ubuntu-latest

    steps:                          # checkout and set up node
    - uses: actions/checkout@v1     # ensure a fresh checkout of source code

    - name: Setup Node              # setup Node.js
      uses: actions/setup-node@v1

    - name: npm stability           # ensure the stability of npm
      run: |
        npm prune -production=true  # prune for a fresh node_modules directory
        npm cache clean --f         # clear the cache
        npm install                 # install dependencies

    - name: lint                    # ensure all source code is lint-free
      run: grunt eslint --no-cache  # ensure everything is linted

    - name: test                    # ensure that all tests pass
      run: npm test --if-present